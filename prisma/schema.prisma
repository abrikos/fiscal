generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["views"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model token {
  id         Int      @id(map: "token_pk") @default(autoincrement())
  value      String
  user_id    Int
  created_at DateTime @default(now()) @db.Timestamp(6)
  users      users    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "token_user_id_fk")
}

model users {
  id               Int     @id(map: "user_pk") @default(autoincrement())
  password_hash    String?
  restore_password String?
  strategy         String?
  name             String?
  photo            String?
  email            String  @unique(map: "unique_email")
  token            token[]
}

view v_token_live {
  id           Int      @id
  value        String
  user_id      Int
  created_at   DateTime @db.Timestamp(6)
  live_seconds Int
}
